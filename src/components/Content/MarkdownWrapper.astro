<article>
  <slot />
</article>

<style>
  @import '../../styles/vars.css';
  @import '../../styles/mixins/mixins.css';

  article {
    font-size: fluid(16px, 18px, toRem);
    line-height: 155%;
    & > :global(* + *) {
      margin-top: toRem(32px);
    }
    & > :global(*:first-child) {
      margin-top: 0;
    }
  }

  article :global(a) {
    color: $blue;
    &:hover {
      color: $blue-500;
    }
  }

  /* Asides                                                    */
  /* --------------------------------------------------------- */

  article :global(aside),
  article :global(blockquote) {
    position: relative;
    margin-inline: fluid(-32px, -24px, toRem);
    padding: fluid(24px, 32px, toRem);
    white-space: normal;
    border-radius: 8px;
    margin-block: fluid(64px, 40px, toRem);
    &:after,
    &:before {
      content: '';
      position: absolute;
      top: -15px;
      bottom: 0;
      left: -15px;
      width: 30px;
      height: 30px;
      border: 3px solid;
      @mixin theme(box-shadow, 0 0 0 2px $gray-50, 0 0 0 2px $gray-950);
      box-sizing: content-box;
    }
    &:after {
      mask-repeat: no-repeat;
      mask-position: center;
    }
    &:before {
      border-radius: 100px;
      background-clip: padding-box;
    }
  }

  article :global(.aside--info),
  article :global(blockquote) {
    @mixin theme(background-color, alpha($blue, 8%), alpha($blue, 14%));
    /* @mixin theme(color, $gray-950, $blue__light); */
    &:after {
      @mixin theme(background-color, $gray-50, $gray-850);
      mask-image: url('../../icons/icon-info.svg');
    }
    &:before {
      background-color: $blue;
      @mixin theme(border-color, alpha($blue, 35%), alpha($blue, 65%));
    }
  }

  article :global(.aside--error) {
    @mixin theme(background-color, alpha($red, 12%), alpha($red, 12%));
    /* @mixin theme(color, $gray-950, $red__light); */
    &:after {
      @mixin theme(background-color, $gray-50, $gray-850);
      mask-image: url('../../icons/icon-exclamation.svg');
      mask-size: 28px;
    }
    &:before {
      background-color: $red;
      @mixin theme(border-color, alpha($red, 45%), alpha($red, 50%));
    }
  }

  /* CODE BLOCK (shiki + remark-code-extra - see astro.config) */
  /* --------------------------------------------------------- */

  article :global(pre) {
    background: transparent !important;
    /* white-space: pre-wrap; */
    overflow-x: scroll;
  }

  :global(div.codeblock) {
    padding-block: fluid(24px, 24px, toRem);
    padding-inline: fluid(24px, 32px, toRem);
    @mixin theme(background-color, $gray-950, $gray-975);
    border-radius: 8px;
    font-size: toRem(14px);
    line-height: 170%;
    position: relative;
    margin-block: fluid(64px, 40px, toRem);
    margin-inline: fluid(-32px, -24px, toRem);
    white-space: normal;
    font-family: Menlo, Monaco, monospace;
  }

  /* language badge */
  :global(div.codeblock:before) {
    position: absolute;
    right: 16px;
    top: 16px;
    color: rgb(119 120 123);
    font-size: toRem(12px);
    line-height: 100%;
  }

  :global(div.codeblock--js:before, div.codeblock--javascript:before) {
    content: 'js';
  }

  :global(div.codeblock--jsx:before) {
    content: 'jsx';
  }

  :global(div.codeblock--json:before) {
    content: 'json';
  }

  :global(div.codeblock--html:before) {
    content: 'html';
  }

  :global(div.codeblock--css:before) {
    content: 'css';
  }

  :global(div.codeblock--shell:before, div.codeblock--bash:before, div.codeblock--sh:before) {
    content: 'shell';
  }

  :global(div.codeblock--php:before) {
    content: 'php';
  }

  /* HEADINGS */
  /* -------- */

  article :global(h1) {
    display: none;
  }

  article :global(h2),
  article :global(h3),
  article :global(h4),
  article :global(h5),
  article :global(h6) {
    @mixin theme color, var(--gray-800), var(--gray-50);
    font-weight: 600;
  }

  article :global(h2) {
    font-size: fluid(30, 30, toRem);
    margin-top: fluid(64px, 40px, toRem);
    line-height: 130%;
    & + :global(*) {
      margin-top: toRem(32px) !important;
    }
  }

  /* LISTS */
  /* ----- */

  article :global(ul) {
    list-style: disc;
    padding-left: 1.25rem;
  }
  article :global(li) {
    list-style-position: outside;
  }

  article :global(li input) {
    display: none; /* TODO: Needs styling rather than hiding - Astro doesn't add anything helpful to markup for targetting */
  }

  /* Todo bullet list styling. :has is still lacking a bit of support (https://caniuse.com/css-has) but fallbacks to normal bullet. */
  article :global(li:has(.todo)) {
    list-style: none;
    position: relative;
    &::before {
      content: '';
      position: absolute;
      width: 0.78em;
      height: 0.78em;
      left: -1.25rem;
      top: .4rem;
      @mixin theme background, $gray-100, $gray-850;
      border: 1px solid;
      @mixin theme border-color, $gray-300, $gray-800;
      border-radius: 2px;
    }
  }
</style>
